{"version":3,"file":"index.js","sourceRoot":"","sources":["../index.ts"],"names":[],"mappings":"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","sourcesContent":["// Buffer Source Conversion\n// ------------------------\n\nexport const bufferSourceToUint8Array = (bs: BufferSource) => bs instanceof ArrayBuffer\n  ? new Uint8Array(bs)\n  : new Uint8Array(bs.buffer, bs.byteOffset, bs.byteLength);\n\nexport const bufferSourceToDataView = (bs: BufferSource) => bs instanceof ArrayBuffer\n  ? new DataView(bs)\n  : new DataView(bs.buffer, bs.byteOffset, bs.byteLength);\n\nconst bs2u8 = bufferSourceToUint8Array;\nconst bs2dv = bufferSourceToDataView;\n\n\n// Hex Functions\n// -------------\n\nexport const byteToHex = (byte: number) => byte.toString(16).padStart(2, '0');\nexport const hexToByte = (hexOctet: string) => parseInt(hexOctet, 16);\n\nexport const hexStringToBytes = (hexString: string) => new Uint8Array(\n  hexString.replace(/[^0-9a-f]/ig, '').match(/[0-9a-f]{1,2}/ig)?.map(hexToByte) ?? []\n);\nexport const bytesToHexArray = (bufferSource: BufferSource) => Array.from(bs2u8(bufferSource), byte => byteToHex(byte));\nexport const bytesToHexString = (bufferSource: BufferSource) => bytesToHexArray(bufferSource).join('')\n\n\n// Concatenation\n// -------------\n\nexport function concatUint8Arrays(...uint8Arrays: Uint8Array[]) {\n  const size = uint8Arrays.reduce((size, u8) => size + u8.length, 0);\n  const res = new Uint8Array(size);\n  let i = 0;\n  for (const u8 of uint8Arrays) {\n    res.set(u8, i);\n    i += u8.length;\n  }\n  return res;\n}\n\nexport function concatBufferSources(...bufferSources: BufferSource[]) {\n  return concatUint8Arrays(...bufferSources.map(bs2u8));\n}\n\n// Splitting\n// ---------\n\nexport function splitUint8Array(uint8Array: Uint8Array, ...indices: number[]) {\n  const result: Uint8Array[] = new Array(indices.length + 1);\n  let prev = 0;\n  let i = 0;\n  for (const index of indices) {\n    result[i++] = uint8Array.subarray(prev, index);\n    prev = index;\n  }\n  result[i] = uint8Array.subarray(prev);\n  return result;\n}\n\nexport function splitBufferSource(bufferSource: BufferSource, ...indices: number[]) {\n  return splitUint8Array(bs2u8(bufferSource), ...indices);\n}\n\n\n// Comparison\n// ----------\n\nexport function compareUint8Arrays(u8_1: Uint8Array, ...u8s: Uint8Array[]) {\n  if (u8s.some(u8_i => u8_1.byteLength !== u8_i.byteLength)) return false;\n  let res = true;\n  for (const u8_i of u8s) {\n    for (let i = 0; i !== u8_1.length; i++) {\n      const r = u8_1[i] === u8_i[i];\n      res = r && res;\n    }\n  }\n  return res;\n}\n\nfunction compareDataViewsUint32(dv_1: DataView, ...dvs: DataView[]) {\n  if (dvs.some(dv_i => dv_1.byteLength !== dv_i.byteLength)) return false;\n  let res = true;\n  for (const dv_i of dvs) {\n    let i = 0\n    for (i; i < dv_1.byteLength - 3; i += 4) {\n      const r = dv_1.getUint32(i) === dv_i.getUint32(i);\n      res = r && res;\n    }\n    for (i; i < dv_1.byteLength; i++) {\n      const r = dv_1.getUint8(i) === dv_i.getUint8(i);\n      res = r && res;\n    }\n  }\n  return res;\n}\n\nexport function compareBufferSources(bufferSource: BufferSource, ...bufferSources: BufferSource[]) {\n  return compareDataViewsUint32(bs2dv(bufferSource), ...bufferSources.map(bs2dv));\n}\n\nexport function unsafeCompareUint8Arrays(u8_1: Uint8Array, ...u8s: Uint8Array[]) {\n  if (u8s.some(u8_i => u8_1.byteLength !== u8_i.byteLength)) return false;\n  return u8s.every(u8_i => {\n    for (let i = 0; i !== u8_1.length; i++) if (u8_1[i] !== u8_i[i]) return false;\n    return true;\n  });\n}\n\nfunction unsafeCompareDataViewsUint32(dv_1: DataView, ...dvs: DataView[]) {\n  if (dvs.some((dv_i) => dv_1.byteLength !== dv_i.byteLength)) return false;\n  return dvs.every(dv_i => {\n    let i = 0;\n    for (i; i < dv_i.byteLength - 3; i += 4) if (dv_1.getUint32(i) !== dv_i.getUint32(i)) return false;\n    for (i; i < dv_1.byteLength; i++) if (dv_1.getUint8(i) === dv_i.getUint8(i)) return false;\n    return true;\n  });\n}\n\nexport function unsafeCompareBufferSources(bufferSource: BufferSource, ...bufferSources: BufferSource[]) {\n  return unsafeCompareDataViewsUint32(bs2dv(bufferSource), ...bufferSources.map(bs2dv));\n}\n"]}